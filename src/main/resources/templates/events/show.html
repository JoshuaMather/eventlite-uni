<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/default}">
<head>
  <title>Event Description</title>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js"></script>
<style>
#map { width: 100%; height:600px;}
</style>
  
</head>
<body>

  <div layout:fragment="content">
    
    <br><h1 th:text="${event.name}"></h1><br> 
  
  	<lable><u><strong>Date of Event:</strong></u></lable>   	
    <p th:text="${#temporals.format(event.date, 'dd MMMM yyyy', new java.util.Locale('en', 'EN'))}"></p>
    
    <div th:if="${event.time} != null">	
    	<lable><u><strong>Time of Event:</strong></u></lable>
    	<p th:text="${event.time}"> Time</p>
    </div> 
    	
    <label><u><strong>Location:</strong></u></label>
    <p> <a th:href="@{/venues/{id}(id=${event.venue.id})}" th:text="${event.venue.name}"></a></p>
    
    <div th:if="${event.description != '' and event.description != null}">
   		<lable><u><strong>Event Description:</strong></u></lable>
    	<p th:text="${event.description}">No Description</p>
	</div>
	 
	 <br>
	 
	 <!-- This is example implementation for more information
	 <lable><u><strong>Event Description:</strong></u></lable>
	 
	 <span th:if="${event.description == null}">
	 	<p> No description</p>
	 </span>
     
     <span th:unless="${event.description == null}">
     	<p th:text="${event.description}">No Description</p>
     </span>-->
  
 	<table>
     <td><a class="btn btn-primary" role="button" th:href="@{/events}"><i class="fas fa-arrow-left" aria-hidden="true"></i> Back</a></td>
    
     <div sec:authorize="hasAnyRole('ORGANISER', 'ADMINISTRATOR')">
	         <td><a class="btn btn-success" role="button" th:href="@{/events/{id}/update(id=${event.id})}"><i class="fas fa-edit"></i> Update</a></td>
	 </div>

   
     </table>
     <br>
     <div sec:authorize="hasAnyRole('ORGANISER', 'ADMINISTRATOR')">
	 <form th:action = "@{/events/{id}(id=${event.id})}" th:method="delete">
	      <button class="btn btn-danger" type="submit" th:name="id" th:value="${event.id}"> <i class="fa fa-trash-alt" aria-hidden="true"></i>
	      Delete
	      </button>
	 </form>
	 </div>
	 <p th:text="${event.venue.longitude}"></p>
	 <p th:text="${event.venue.latitude}"></p>
	 <div id="map"></div>
  </div>
 
<script layout:fragment="maps"  th:inline="javascript">
/*<![CDATA[*/
	var longitude = /*[[${event.venue.longitude}]]*/ ;
	var latitude = /*[[${event.venue.latitude}]]*/ ;
	
	mapboxgl.accessToken = 'pk.eyJ1IjoiZXZlbnRsaXRlZjEiLCJhIjoiY2tta3hjb3VmMDduMzJ4cnpxdDVwa2M0eSJ9.Qn8ih-E9sJje_-XZw9gbEQ';
	var map = new mapboxgl.Map({
		container: 'map',
		style: 'mapbox://styles/mapbox/streets-v11',
		center: [longitude, latitude],
		zoom: 10
		});
 
	// Create a default Marker and add it to the map.
	var marker1 = new mapboxgl.Marker()
		.setLngLat([longitude, latitude])
		.addTo(map);

/*]]>*/
</script>
</body>
</html>